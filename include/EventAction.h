
#ifndef EventAction_h
#define EventAction_h 1

#include <vector>

#include "RootFileStruct.h"
#include "TCanvas.h"
#include "Constants.h"

class EventAction
{
public:
  EventAction();
  ~EventAction();

public:
  void BeginOfEventAction();
  void EndOfEventAction();

  vector<int> xpts[nlayer];
  vector<int> ypts[nlayer];
  vector<int> xptsalltdc[nlayer][nTDCpLayer]; //signal for each TDC
  vector<int> yptsalltdc[nlayer][nTDCpLayer];

  Double_t cal_slope2(Double_t x, Double_t* par);
  void GetPosInStrip(int ixy, double* ext, double* otherext, double* pos, double* local);

private:
  double align_xstr_ydev[nlayer][nPosAlignPar] ={
    {0.378799, -0.0103435, 0.0294646},
  	{-0.289823, 0.005905, -0.128604},
  	{-0.0938795, -0.0015088, -0.110556},
  	{0.125222, -0.00877913, -0.208487},
  	{0.203481, -0.0029897, 0.0656587},
  	{0.0177999, -0.00396816, -0.102375},
  	{0.0179844, -0.00333615, -0.10059},
  	{0.487905, -0.00587077, 0.384449},
  	{0.0196337, 0.0083739, 0.24446},
  	{-0.178701, 0.00360379, -0.0497524},
  	{0.131686, 0.00393464, 0.238113},
  	{-0.050804, 0.000793465, -0.0253505}};
  double align_ystr_xdev[nlayer][nPosAlignPar] ={
    {-0.239299, 0.0107629, 0.0681905},
  	{0.242562, -0.00579628, 0.0692311},
  	{0.0944097, 0.00126593, 0.13656},
  	{-0.120545, 0.00678728, 0.085419},
  	{-0.210893, 0.00151289, -0.149695},
  	{-0.144272, 0.00472849, -0.00419812},
  	{-0.0853803, 0.00301556, -0.0325722},
  	{-0.102275, 0.000631511, -0.0904438},
  	{-0.147314, -0.00573528, -0.349159},
  	{0.327296, -0.0032148, 0.14547},
  	{-0.0968242, -0.00258652, -0.204518},
  	{-0.211821, -0.000860388, -0.27855}};
  double align_xstr_xdev[nlayer][nPosAlignPar] ={
    {0.0667488, 0.00142772, 0.0273393},
  	{-0.103852, -8.21954e-05, -0.10216},
  	{-0.0390945, -0.00061064, -0.0339788},
  	{-0.00811012, 0.00190294, 0.104191},
  	{-0.0467445, 0.00245776, 0.0367095},
  	{-0.0151288, 0.00184321, 0.034453},
  	{-0.0323859, -0.00264712, -0.0740822},
  	{-0.0772644, 0.00315467, 0.00723611},
  	{-0.106228, 0.00321937, 0.00332138},
  	{-0.141061, 0.00426494, -0.0778646},
  	{-0.199577, 0.00860155, 0.0488217},
  	{-0.132723, 0.00203228, 0.0491761}};
  double align_ystr_ydev[nlayer][nPosAlignPar] ={
    {0.00453425, -0.00349104, -0.209847},
  	{0.147766, 7.88917e-05, 0.0891817},
  	{0.120254, 3.79443e-05, 0.0253254},
  	{-0.0221867, 0.00323213, -0.0412028},
  	{0.0377476, -0.00382866, -0.0773817},
  	{0.0315155, -0.00407352, -0.0725246},
  	{-0.0137578, -0.000103093, -0.039819},
  	{-0.0466412, -0.00037037, -0.0487983},
  	{0.03916, 0.00309259, 0.0948947},
  	{0.0263892, 0.00135496, 0.0742521},
  	{0.0918279, -0.00586882, -0.056975},
  	{0.147549, -0.000988079, 0.128039}};

  double xposerrsq[nmxhits][nlayer] = {
    {0.0720321, 0.0469412, 0.0463668, 0.0640264, 0.0591043, 0.0573654, 0.0535646, 0.0615564, 0.0540133, 0.0639267, 0.0616222, 0.0844544},
    {0.0588236, 0.0436311, 0.0450124, 0.0627356, 0.0417935, 0.0434175, 0.0389306, 0.0307558, 0.0461263, 0.0259637, 0.0321959, 0.0598731},
    {0.120711, 0.088511, 0.0774479, 0.0792742, 0.0916718, 0.0920265, 0.0915724, 0.135958, 0.0905246, 0.124918, 0.182507, 0.137034},
    {0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02}};
  double yposerrsq[nmxhits][nlayer] = {
    {0.0660998, 0.0442894, 0.043711, 0.0422127, 0.0519761, 0.0473797, 0.0557517, 0.0611246, 0.0552924, 0.0460819, 0.0452838, 0.0811592},
    {0.0616716, 0.0587814, 0.0569832, 0.0601819, 0.0516872, 0.0540295, 0.0514467, 0.0541743, 0.0471379, 0.0463332, 0.0477992, 0.074787},
    {0.120814, 0.0805484, 0.0809346, 0.071376, 0.0945827, 0.0875409, 0.0862681, 0.107565, 0.0872628, 0.115767, 0.12425, 0.0905013},
    {0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02}};

  float errxco[nlayer]={0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675};
  float erryco[nlayer]={0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675,0.288675};



};

#endif
